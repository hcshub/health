<?xml version="1.0" encoding="UTF-8" ?>
        <!DOCTYPE mapper
                PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
                "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.golday.dao.OrderDao">
        <select id="checkOrder" parameterType="order" resultType="order">
                select * from t_order where member_id = #{memberId} and orderDate = #{orderDate} and package_id = #{packageId}
        </select>

        <insert id="addOrder" parameterType="order">
                insert into t_order (member_Id,orderDate,orderType,orderStatus,package_Id)
                values (#{memberId},#{orderDate},#{orderType},#{orderStatus},#{packageId})
                <selectKey keyProperty="id" resultType="int" order="AFTER">
                        select last_insert_id()
                </selectKey>
        </insert>

        <select id="findMessage" parameterType="int" resultType="map">
                select m.name as member,p.name as setmeal, o.orderDate, o.orderType
                from t_member m,t_order o,t_package p
                where m.id = o.member_id and o.package_id = p.id
                and o.id = #{id}
        </select>

        <select id="findByTodayVisitsNumber" parameterType="string" resultType="int">
              SELECT COUNT(id) FROM t_order WHERE orderDate = #{today} AND orderStatus = #{orderstatusYes}
        </select>

        <select id="findByThisWeekVisitsNumber" parameterType="string" resultType="int">
              SELECT COUNT(id) FROM t_order WHERE orderDate BETWEEN #{beginDate} AND #{endDate} AND orderStatus = #{orderstatusYes}
        </select>

        <select id="findByThisMonthVisitsNumber" parameterType="string" resultType="int">
              SELECT COUNT(id) FROM t_order WHERE orderDate BETWEEN #{monthStartDay} AND #{monthLastDay} AND orderStatus = #{orderstatusYes}
        </select>
</mapper>